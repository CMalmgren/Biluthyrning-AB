
@{
    ViewData["Title"] = "Beräkna";
}
@model CalculateCostVM

<h2 style="font-weight:bold; padding-bottom: 5px ">Beräkna pris</h2>

<p>Räkna ut slutpriset vid bilens återlämning</p>

<div>
    <form asp-controller="Bookings" asp-action="Calculate">
        <div class="row">
            <div class="form-group col-4">
                <label asp-for="CustomerSSN"></label>
                <input type="text" asp-for="CustomerSSN" class="form-control" />
                <span asp-validation-for="CustomerSSN"></span>
            </div>
            <div class="form-group col-4">
                <label asp-for="DistanceEnd"></label>
                <input type="text" asp-for="DistanceEnd" class="form-control" />
                <span asp-validation-for="DistanceEnd"></span>
            </div>
            <div class="form-group col-4">
                <label asp-for="DateReturned"></label>
                <input type="text" asp-for="DateReturned" class="form-control" id="datepicker" />
            </div>
        </div>
        @*Ta fram aktuella bilar med ett ajax, markera den bil man vill lämna tillbaka, skicka med bilen*@
        <button type="submit" id="CalcPrice" class="btn btn-secondary">Beräkna pris</button>
    </form>

</div>
<br />
<div id="resultPrice">
    <p>
        Priset för denna uthyrning blir @Model.FinalPrice
    </p>
    <form asp-controller="Booking" asp-action="ReturnCar">
        <input type="hidden" value="@Model" />
        <input class="btn btn-secondary" type="submit" value="Lämna tillbaka bil och betala" />
    </form>
</div>

@section Script {
    <script type="text/javascript">
        $(function () {
            $("#datepicker").datepicker({ dateFormat: 'dd-mm-yy' });
        });
    </script>

    <script type="text/javascript">
        $(function () {
            if ($("#CalcPrice").click) {
                $("#resultPrice").show();
            }
            else {
                $("#resultPrice").hide();
            }
        });
    </script>
}